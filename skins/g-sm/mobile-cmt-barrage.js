!function(){function e(e){return"[object Function]"===Object.prototype.toString.call(e)}function a(a,t,n){if(o[a])throw new Error("Module "+a+" has been defined already.");e(t)&&(n=t),o[a]={factory:n,inited:!1,exports:null}}function t(a){var t,r,i,m;if(t=o[a],r={},i={exports:{}},!e(t.factory))throw new Error("Module "+a+" has no factory.");if(m=t.factory.call(void 0,n,r,i),void 0!==m)t.exports=m;else if(i.hasOwnProperty("exports")&&"object"==typeof i.exports&&i.exports instanceof Object==!0){var c,s=!1;for(c in i.exports)i.exports.hasOwnProperty(c)&&(s=!0);s===!1?t.exports=r:t.exports=i.exports}else t.exports=i.exports;t.inited=!0}function n(e){var a;if(a=o[e],!a)throw new Error("Module "+e+" is not defined.");return a.inited===!1&&t(e),a.exports}var o={};a("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/mobile-cmt-barrage.js",function(e,a,t){window.changyan.api.ready(function(a){function t(e){o.ajax({url:"http://changyan.sohu.com/api/2/topic/comments",dataType:"jsonp",jsonp:"callback",scriptCharset:"utf-8",cache:!1,data:{client_id:a.getFeConfig("appid"),page_size:30,topic_id:a.getTopicId(),page_no:1},success:function(t){t.error_code?console.log(t.error_msg):3===t.mode||0===t.comments.length?(m=[],e(m)):(m=l.concat(t.comments),m.length<4&&(m=[]),r.each(m,function(e,t){var n=e.content;e.content=a.util.formatContent(n)}),e(m))}})}function n(){var e=o(window);e.on("scroll",function(){var a=o("#SOHUCS #SOHU_MAIN .module-mobile-cmt-list");if(a.length){var t=a.offset().top,n=a.offset().top+a.height();t-e.height()-100<e.scrollTop()&&e.scrollTop()<n+100?s.barrageSwitch("close"):s.barrageSwitch("open")}})}var o=a.util.jquery,r=a.util._,i=(a.util.velocityjs,"true"===a.getBeConfig("mobile_allow_barrage")||"true"===a.getBeConfig("barrageSwitch"));if(i){var m,c=o("#SOHUCS #SOHU_MAIN"),s=e("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.js"),l=a.getHotCommentList();t(function(e){s.init(c,e),"false"===window.localStorage.getItem("changyan-barrage")&&s.closeBarrage()}),n(),a.event.register("mobile-cmt-barrage","open"),a.event.register("mobile-cmt-barrage","close"),a.event.register("mobile-cmt-barrage","refresh"),a.event.listen("changyan:mobile-cmt-barrage:open",function(){s.openBarrage()}),a.event.listen("changyan:mobile-cmt-barrage:close",function(){s.closeBarrage()}),a.event.listen("changyan:mobile-cmt-barrage:refresh",function(){t(function(e){s.stopBarrage(),s.init(c,e),"false"===window.localStorage.getItem("changyan-barrage")&&s.closeBarrage()})}),a.event.listen("changyan:on-topic-lod",function(){a.events&&a.events.onTopicLoad&&r.isFunction(a.events.onTopicLoad)===!0&&a.events.onTopicLoad()})}})}),a("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.js",function(e,a,t){window.changyan.api.ready(function(a){var n=a.util.jquery,o=(a.util._,a.util.velocityjs);!function(){for(var e=0,a=["webkit","moz"],t=0;t<a.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[a[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[t]+"CancelAnimationFrame"]||window[a[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,t){var n=(new Date).getTime(),o=Math.max(0,16.7-(n-e)),r=window.setTimeout(function(){a(n+o)},o);return e=n+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var r,i,m,c="open",s=!1,l=!1,d=0,p=!1,g=function(e){r&&("open"!==e||s?"close"===e&&(r.css({visibility:"hidden"}),this.status="close"):(r.css({visibility:"visible"}),this.status="open"))},u=function(){s=!0,g("close")},h=function(){s=!1,g("open")},b=function(e){l=!0,i=e},w=function(e){b(function(){m=e,l=!1,d=0})},f=function(){p=!0},v=function(a,t,c){var s={barrageNum:3,interval:12,speed:1,disappearTime:40};if(arguments.length<2)return void console.log(new error("参数不够！"));if("[object Array]"!==Object.prototype.toString.call(t)||0===t.length)return n('div[node-type="mobile-cmt-barrage"]').remove(),void(p=!1);2===arguments.length&&(c=s),e("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.css");var g=e("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.html.js"),u=n('<div node-type="mobile-cmt-barrage" class="module-mobile-cmt-barrage" style="position: fixed;top: 0;right: 0;"></div>');a.append(u),r=u;var h=c.barrageNum||s.barrageNum,b=c.interval||s.interval,w=c.speed||s.speed,f=c.disappearTime||s.disappearTime,v=0,A=[],y=0,B=!1,x=1;l=!1,m=t;var C=function(){var e,a=function(){tempHtml=o.render(g,{data:m[d%m.length]}),u.append(tempHtml),$domList=u.children(),v=$domList.length,A.push(0),d++};for(0>=v&&a(),e=0;v>e;e++)A[e]+=1,$domList.eq(e).css({y:-A[e]*w});B&&(x-=1/f,$domList.eq(0).css({opacity:x}),0>=x&&(B=!1,x=1,$domList.eq(0).remove(),A.shift(),v--,$domList=u.children(),$domList.length<=0&&i()));var t=A[v-1];t===b&&(y=Number($domList.eq(v-1).css("height").slice(0,-2))),(v>=h||l)&&t>=y/w+b-f-5&&(B=!0),t>y/w+b&&!l&&a(),p!==!0?requestAnimationFrame(C):(u.remove(),p=!1)};window.requestAnimationFrame(C)},A={barrageSwitch:g,init:v,status:c,closeBarrage:u,openBarrage:h,refreshBarrage:w,stopBarrage:f};t.exports=A})}),a("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.css",function(e,a,t){var n=decodeURIComponent("%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%7Bz-index%3A1%7D%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%20.danmu-wrap%7Bheight%3Aauto%3Bposition%3Afixed%3Btop%3A16.666666667em%3Bright%3A1em%3Bmax-height%3A7.333333333em%3Bborder-radius%3A1.166666667em%3Bbackground-color%3Argba(0%2C0%2C0%2C.5)%3Btransform%3AtranslateZ(0)%7D%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%20.danmu-wrap%20.portrait%7Bheight%3A2.25em%3Bwidth%3A2.25em%3Bdisplay%3Ablock%3Bmargin%3A.166666667em%20.5em%201px%20.166666667em%3Bborder-radius%3A2.25em%3Bfloat%3Aleft%7D%23SOHUCS%20%23SOHU_MAIN%20.module-mobile-cmt-barrage%20.danmu-wrap%20.danmu-cmt%7Bwhite-space%3Anormal%3Bmax-width%3A16em%3Bmax-height%3A4.538461538em%3Bline-height%3A1.538461538em%3Bdisplay%3Ablock%3Bfont-size%3A1.0833333333333333em%3Boverflow%3Ahidden%3Bcolor%3A%23fff%3Bpadding-right%3A.384615385em%3Bmargin%3A.461538462em%201px%7D"),o=window.document,r=o.createElement("style");r.setAttribute("type","text/css"),o.all?r.styleSheet.cssText=n:r.innerHTML=n,o.getElementsByTagName("head").item(0).appendChild(r)}),a("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/barrage-animation.html.js",function(e,a,t){"use strict";var n;return n=[],n.push('<div class="danmu-wrap">'),n.push('    <img class="portrait" src="$!{data.passport.img_url}"></img>'),n.push('    <span class="danmu-cmt">$!{data.content}</span>'),n.push("</div>"),n.join("\n")}),t("C:/Users/yuchenzhang/AppData/Roaming/npm/node_modules/mdevp/cache/www/mobile-cmt-barrage/mobile-cmt-barrage.js")}();